---

- hosts: all
  sudo:  yes

  vars:
    _env_dev: "{{ 'env_dev' in group_names }}"
    _user:    "{{ 'vagrant' if 'env_dev' in group_names else 'docker' }}"

  roles:
    - { role: elao.motd }
    - { role: elao.timezone }
    - { role: elao.env }
    - { role: elao.apt }
    - { role: elao.ssh }
    - { role: elao.git }
    - { role: elao.zsh, when: _env_dev }
    - { role: elao.ohmyzsh, when: _env_dev }
    - { role: elao.curl }
    - { role: elao.acl }
    - { role: elao.files }
    - { role: elao.make }
    - { role: elao.nodejs }
    - { role: elao.npm }
    - { role: elao.ruby }
    - { role: elao.gem }
    - { role: elao.mailcatcher }
    - { role: elao.logio, when: _env_dev }
    - { role: elao.php }
    - { role: elao.composer }
    - { role: elao.nginx,
        elao_nginx_configs: "{{ _nginx_configs + _env_nginx_configs|default([]) }}"
      }
    # MySql
    - { role: elao.mysql }
    - { role: elao.phpmyadmin, when: _env_dev }
    # App
